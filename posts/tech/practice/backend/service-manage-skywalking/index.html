<!doctype html><html lang=zh data-figures class=page><head><title>服务治理相关实践-skywalking | LX 知识库</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta name=description content="SkyWalking 全景解析：从核心逻辑到存储结构的深度剖析
在微服务架构日益盛行的今天，如何有效地观测、监控和诊断分布式系统成为了开发者和运维工程师面临的巨大挑战。Apache SkyWalking 作为一款顶级的开源应用性能监控（APM）工具，为分布式系统的可观测性提供了强大的解决方案。 …"><meta name=twitter:card content="summary"><meta name=twitter:creator content><meta name=twitter:title content="服务治理相关实践-skywalking"><meta name=twitter:image content="https://namejlt.github.io/"><meta property="og:url" content="https://namejlt.github.io/posts/tech/practice/backend/service-manage-skywalking/"><meta property="og:title" content="服务治理相关实践-skywalking"><meta property="og:description" content="SkyWalking 全景解析：从核心逻辑到存储结构的深度剖析
在微服务架构日益盛行的今天，如何有效地观测、监控和诊断分布式系统成为了开发者和运维工程师面临的巨大挑战。Apache SkyWalking 作为一款顶级的开源应用性能监控（APM）工具，为分布式系统的可观测性提供了强大的解决方案。 …"><meta property="og:image" content="https://namejlt.github.io/"><meta name=keywords content="服务治理,skywalking"><link rel=apple-touch-icon sizes=180x180 href=https://namejlt.github.io/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://namejlt.github.io/icons/favicon-32x32.png><link rel=manifest href=https://namejlt.github.io/icons/site.webmanifest><link rel=canonical href=https://namejlt.github.io/posts/tech/practice/backend/service-manage-skywalking/><link rel=preload href=https://namejlt.github.io/css/styles.dc38388a8f0b890e788bd3a99b7495d14e7d5ac4359ed3b49abeb778497863b284ad4cc7e496ef58c84139295f9bafed82f5a41345eda86bd2d429cccb7c2596.css integrity="sha512-3Dg4io8LiQ54i9Opm3SV0U59WsQ1ntO0mr63eEl4Y7KErUzH5JbvWMhBOSlfm6/tgvWkE0XtqGvS1CnMy3wllg==" as=style crossorigin=anonymous><link rel=preload href=https://namejlt.github.io/zh/js/bundle.69325906ed33af5dc7368bca8e00939b95d01580847ca88772bf66270e14fb40adff431f178da9149d66c61d7dcb12f9db4aabf2273327b03c5ddfc5424b4d5e.js as=script integrity="sha512-aTJZBu0zr13HNovKjgCTm5XQFYCEfKiHcr9mJw4U+0Ct/0MfF42pFJ1mxh19yxL520qr8iczJ7A8Xd/FQktNXg==" crossorigin=anonymous><link rel=stylesheet type=text/css href=https://namejlt.github.io/css/styles.dc38388a8f0b890e788bd3a99b7495d14e7d5ac4359ed3b49abeb778497863b284ad4cc7e496ef58c84139295f9bafed82f5a41345eda86bd2d429cccb7c2596.css integrity="sha512-3Dg4io8LiQ54i9Opm3SV0U59WsQ1ntO0mr63eEl4Y7KErUzH5JbvWMhBOSlfm6/tgvWkE0XtqGvS1CnMy3wllg==" crossorigin=anonymous></head><body data-code=100 data-lines=false id=documentTop data-lang=zh><header class=nav_header><nav class=nav><a href=https://namejlt.github.io/ class="nav_brand nav_item" title="LX 知识库">LX 知识库<div class=nav_close><div><svg class="icon"><title>open-menu</title><use xlink:href="#open-menu"/></svg>
<svg class="icon"><title>closeme</title><use xlink:href="#closeme"/></svg></div></div></a><div class='nav_body nav_body_left'><div class=nav_parent><a href=https://namejlt.github.io/posts/ class=nav_item title=文章>文章</a></div><div class=nav_parent><a href=https://namejlt.github.io/tags/ class=nav_item title=标签>标签</a></div><div class=nav_parent><a href=https://namejlt.github.io/categories/ class=nav_item title=分类>分类</a></div><div class=nav_parent><a href=https://namejlt.github.io/about/ class=nav_item title=关于>关于</a></div><div class=follow><div class=color_mode><input type=checkbox class=color_choice id=mode></div></div></div></nav></header><main><div class="grid-inverse wrap content"><article class=post_content><h1 class=post_title>服务治理相关实践-skywalking</h1><div class=post_meta><span><svg class="icon"><title>calendar</title><use xlink:href="#calendar"/></svg>
</span><span class=post_date>Jul 1, 2025
</span><span class=post_time>· 18 分钟阅读</span><span>&nbsp;· <a href=https://namejlt.github.io/tags/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/ title=服务治理 class="post_tag button button_translucent">服务治理
</a><a href=https://namejlt.github.io/tags/skywalking/ title=skywalking class="post_tag button button_translucent">skywalking
</a></span><span class=page_only>&nbsp;·<div class=post_share>分享到:
<a href="https://twitter.com/intent/tweet?text=%e6%9c%8d%e5%8a%a1%e6%b2%bb%e7%90%86%e7%9b%b8%e5%85%b3%e5%ae%9e%e8%b7%b5-skywalking&url=https%3a%2f%2fnamejlt.github.io%2fposts%2ftech%2fpractice%2fbackend%2fservice-manage-skywalking%2f&tw_p=tweetbutton" class=twitter title="分享到 Twitter" target=_blank rel=nofollow><svg class="icon"><title>twitter</title><use xlink:href="#twitter"/></svg>
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fnamejlt.github.io%2fposts%2ftech%2fpractice%2fbackend%2fservice-manage-skywalking%2f&t=%e6%9c%8d%e5%8a%a1%e6%b2%bb%e7%90%86%e7%9b%b8%e5%85%b3%e5%ae%9e%e8%b7%b5-skywalking" class=facebook title="分享到 Facebook" target=_blank rel=nofollow><svg class="icon"><title>facebook</title><use xlink:href="#facebook"/></svg>
</a><a href=#linkedinshare id=linkedinshare class=linkedin title="分享到 LinkedIn" rel=nofollow><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg>
</a><a href=https://namejlt.github.io/posts/tech/practice/backend/service-manage-skywalking/ title="Copy Link" class="link link_yank"><svg class="icon"><title>copy</title><use xlink:href="#copy"/></svg></a></div></span></div><div class=post_toc><h2>文章目录</h2><nav id=TableOfContents><ul><li><a href=#skywalking-全景解析从核心逻辑到存储结构的深度剖析>SkyWalking 全景解析：从核心逻辑到存储结构的深度剖析</a><ul><li><a href=#一skywalking-总体介绍分布式系统的天眼>一、SkyWalking 总体介绍：分布式系统的“天眼”</a></li><li><a href=#二核心业务逻辑数据驱动的实时洞察>二、核心业务逻辑：数据驱动的实时洞察</a></li><li><a href=#三数据收集与格式构建完整的可观测性拼图>三、数据收集与格式：构建完整的可观测性拼图</a></li><li><a href=#四日志与链路的串联traceid-的神奇之旅>四、日志与链路的串联：<code>TraceId</code> 的神奇之旅</a></li><li><a href=#五存储的数据结构揭秘底层的数据模型>五、存储的数据结构：揭秘底层的数据模型</a></li><li><a href=#六结语>六、结语</a></li></ul></li><li><a href=#skywalking-生产实践日志采集的最佳策略与按需追踪的实现>SkyWalking 生产实践：日志采集的最佳策略与按需追踪的实现</a><ul><li><a href=#一如何配置日志采集从全要到精要的最佳实践>一、如何配置日志采集：从“全要”到“精要”的最佳实践</a></li><li><a href=#二按需追踪如何实现对特殊请求的重点关照>二、按需追踪：如何实现对特殊请求的“重点关照”？</a></li><li><a href=#三结语>三、结语</a></li></ul></li><li><a href=#指导工程师快速搭建可观测平台融合巨头理念的-skywalking-最佳实践>指导工程师快速搭建可观测平台：融合巨头理念的 SkyWalking 最佳实践</a><ul><li><a href=#一核心理念学习巨头的服务治理与可观测性思想>一、核心理念：学习巨头的服务治理与可观测性思想</a></li><li><a href=#二skywalking-快速搭建与最佳实践>二、SkyWalking 快速搭建与最佳实践</a></li><li><a href=#三重要注意事项>三、重要注意事项</a></li><li><a href=#总结>总结</a></li></ul></li></ul></nav></div><div class=post_body><h2 id=skywalking-全景解析从核心逻辑到存储结构的深度剖析>SkyWalking 全景解析：从核心逻辑到存储结构的深度剖析</h2><p>在微服务架构日益盛行的今天，如何有效地观测、监控和诊断分布式系统成为了开发者和运维工程师面临的巨大挑战。Apache SkyWalking 作为一款顶级的开源应用性能监控（APM）工具，为分布式系统的可观测性提供了强大的解决方案。本文将带你全面了解 SkyWalking，深入探讨其核心业务逻辑、数据收集与串联机制，并揭示其底层的数据存储结构。</p><h3 id=一skywalking-总体介绍分布式系统的天眼>一、SkyWalking 总体介绍：分布式系统的“天眼”</h3><p>Apache SkyWalking 是一个专为微服务、云原生和容器化（Docker, Kubernetes, Mesos）架构设计的应用性能监控系统。它提供了分布式追踪、服务网格遥测分析、度量（Metrics）聚合和可视化等多种能力。SkyWalking 的核心目标是提供一个多维度、自动化的可观测性平台，帮助用户快速定位问题、优化性能。</p><p>其逻辑上主要由以下四部分构成：</p><ul><li><strong>探针（Probes/Agents）</strong>: 负责在各个服务中收集数据。SkyWalking 提供了多种语言的探针，如 Java、.NET Core、Node.js、Go、Python 等。这些探针通过自动或手动埋点的方式，无侵入地收集链路信息、度量指标和日志。</li><li><strong>可观测性分析平台（Observability Analysis Platform, OAP）</strong>: OAP 是 SkyWalking 的后端，负责接收探针发送的数据，进行实时的流式分析、聚合和计算，最终将处理后的数据存入持久化存储中。</li><li><strong>存储（Storage）</strong>: 用于持久化存储经过 OAP 处理后的可观测性数据。SkyWalking 支持多种存储方案，如 Elasticsearch、BanyanDB（其原生分布式数据库）、H2、MySQL、TiDB 和 PostgreSQL，提供了灵活的选择。</li><li><strong>用户界面（UI）</strong>: 一个高度可定制化的 Web 前端，用于可视化地展示和查询分析数据，包括拓扑图、调用链、性能指标和日志等。</li></ul><h3 id=二核心业务逻辑数据驱动的实时洞察>二、核心业务逻辑：数据驱动的实时洞察</h3><p>SkyWalking 的核心业务逻辑围绕着数据的接收、处理和存储展开，其 OAP 采用了流式处理架构，确保了数据处理的低延迟和高吞吐。</p><p><strong>1. 数据接收与分发：</strong></p><p>OAP 通过 gRPC 或 HTTP 协议暴露服务端口，接收来自探针上报的各类遥测数据。内部通过 <code>Receiver</code> 模块来处理不同类型的数据请求，例如 <code>TraceSegmentReportService</code> 用于接收分布式追踪数据，<code>LogReportService</code> 用于接收日志数据。</p><p><strong>2. 流式处理与分析：</strong></p><p>接收到的原始数据会进入 OAP 内部的流式处理引擎。这个引擎是基于一系列的处理器（Processor）构建的管道（Pipeline）。每个处理器负责一项具体的任务，例如：</p><ul><li><strong>Source/Receiver</strong>: 数据的入口，负责接收并解码原始数据。</li><li><strong>Worker/Processor</strong>: 负责核心的分析和计算逻辑。例如，<code>TraceSegmentParser</code> 会解析追踪数据段（Segment），提取出 Span 信息，并构建服务间的依赖关系。<code>MetricsAggregateProcessor</code> 则负责聚合各种性能指标。</li><li><strong>Exporter/DAO</strong>: 负责将分析和聚合后的结果写入到配置的存储介质中。</li></ul><p>这种模块化、流式的处理方式使得 SkyWalking 具有极高的可扩展性，用户甚至可以自定义处理器来满足特定的业务需求。</p><h3 id=三数据收集与格式构建完整的可观测性拼图>三、数据收集与格式：构建完整的可观测性拼图</h3><p>SkyWalking 能够收集多种格式的数据，从而构建起一个完整的系统可观测性视图。</p><p><strong>1. 数据收集格式：</strong></p><p>探针收集的数据被封装成 SkyWalking 定义的协议格式，主要通过 gRPC 上报给 OAP。核心的数据格式包括：</p><ul><li><strong>Trace Segment (<code>SegmentObject</code>)</strong>: 这是分布式追踪的基本单元。一个 <code>SegmentObject</code> 通常包含了一个线程内产生的所有 Span 信息。每个 Segment 都有一个全局唯一的 <code>traceId</code>，用于将分布在不同服务中的 Segment 串联成一个完整的调用链。</li><li><strong>Log Data (<code>LogData</code>)</strong>: 用于上报日志信息。SkyWalking 支持多种日志格式的收集，包括纯文本（<code>TextLog</code>）、JSON（<code>JSONLog</code>）和 YAML（<code>YAMLLog</code>）。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>// 简化的日志数据结构
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>LogData</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>int64</span> timestamp <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> <span style=color:#66d9ef>service</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> serviceInstance <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> endpoint <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>oneof</span> body {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#960050;background-color:#1e0010></span>    TextLog text <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#960050;background-color:#1e0010></span>    JSONLog json <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#960050;background-color:#1e0010></span>    YAMLLog yaml <span style=color:#f92672>=</span> <span style=color:#ae81ff>7</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#960050;background-color:#1e0010></span>  }<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#960050;background-color:#1e0010></span>  TraceContext traceContext <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#960050;background-color:#1e0010></span>  map&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>string</span>&gt; tags <span style=color:#f92672>=</span> <span style=color:#ae81ff>9</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> layer <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>TraceContext</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> traceId <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> traceSegmentId <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>int32</span> spanId <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=四日志与链路的串联traceid-的神奇之旅>四、日志与链路的串联：<code>TraceId</code> 的神奇之旅</h3><p>SkyWalking 最具吸引力的功能之一便是能够将分布式追踪（Trace）与日志（Log）进行无缝关联，从而在排查问题时，能够快速地从一个异常的 Span 跳转到其上下文相关的日志。</p><p><strong>1. 如何串联日志与 Span？</strong></p><p>其核心机制在于 <strong>TraceId 的注入与提取</strong>。</p><ul><li><strong>注入（Injection）</strong>: 当一个请求进入一个被 SkyWalking 探针监控的服务时，探针会生成一个全局唯一的 <code>TraceId</code>，并在后续的线程内和跨服务调用中持续传递。同时，探针会将当前的 <code>TraceId</code>、<code>SegmentId</code>（追踪段ID）和 <code>SpanId</code>（跨度ID）注入到日志框架的上下文中（如 Log4j、Logback 的 MDC - Mapped Diagnostic Context）。</li><li><strong>收集（Collection）</strong>: 当应用打印日志时，配置好的日志框架会自动将 <code>TraceId</code> 等信息包含在日志内容中，或者由专门的日志采集器（如 Filebeat、Fluentd）收集并发送给 OAP。</li><li><strong>关联（Association）</strong>: SkyWalking OAP 接收到日志数据后，会通过其内置的 <strong>日志分析语言（Log Analysis Language, LAL）</strong> 对日志内容进行解析。LAL 能够通过正则表达式或其他解析规则，从日志中提取出 <code>TraceId</code>、<code>SegmentId</code> 和 <code>SpanId</code>。一旦提取成功，OAP 就会将这条日志与对应的 Span 建立关联。</li></ul><p><strong>2. 如何关联 Span 内的日志？</strong></p><p>在 SkyWalking 的 UI 中，当你查看一个具体的调用链（Trace）时，可以点击任意一个 Span。如果这个 Span 在其生命周期内产生了日志，并且这些日志成功地与该 Span 进行了关联，那么在 Span 的详情页中，你就可以直接看到这些相关的日志。</p><p>这种关联是双向的：</p><ul><li><strong>从 Trace 到 Log</strong>: 在 Trace 视图中，可以直接查看与某个 Span 关联的日志。</li><li><strong>从 Log 到 Trace</strong>: 在日志查询页面，如果某条日志包含了 <code>TraceId</code>，你可以直接点击 <code>TraceId</code> 跳转到对应的完整调用链视图。</li></ul><h3 id=五存储的数据结构揭秘底层的数据模型>五、存储的数据结构：揭秘底层的数据模型</h3><p>SkyWalking 的存储层是可插拔的，这里我们以其最常用的存储方案 <strong>Elasticsearch</strong> 和其原生数据库 <strong>BanyanDB</strong> 为例，介绍其存储的数据结构。</p><p><strong>1. Elasticsearch 存储结构：</strong></p><p>SkyWalking 会在 Elasticsearch 中创建一系列的索引来存储不同类型的数据。这些索引通常会按照天或月进行滚动，以方便管理和清理历史数据。</p><ul><li><p><strong>索引命名</strong>: 索引的命名遵循一定的规范，例如：</p><ul><li><code>sw_segment</code>: 存储原始的 Trace Segment 数据。</li><li><code>sw_log</code>: 存储日志数据。</li><li><code>sw_service_resp_time_day</code>: 存储按天聚合的服务响应时间指标。</li><li><code>sw_endpoint_sla_minute</code>: 存储按分钟聚合的端点（API）成功率指标。</li></ul></li><li><p><strong>文档模型（Document Model）</strong>:</p><ul><li><strong>Trace Segment (<code>sw_segment</code>)</strong>: 每个文档代表一个 Segment。其核心字段包括 <code>traceId</code>、<code>segmentId</code>、<code>serviceId</code>、<code>endpointId</code>、<code>startTime</code>、<code>endTime</code> 以及一个包含了所有 Span 信息的 <code>dataBinary</code> 字段（经过 Base64 编码的 <code>SegmentObject</code> Protobuf 序列化字节）。</li><li><strong>Log (<code>sw_log</code>)</strong>: 每个文档代表一条日志。其核心字段包括 <code>serviceId</code>、<code>serviceInstanceId</code>、<code>endpointId</code>、<code>traceId</code>、<code>tags</code> 和包含日志内容的 <code>body</code> 字段。正是通过 <code>traceId</code> 字段，实现了与 <code>sw_segment</code> 索引中数据的关联。</li></ul></li></ul><p><strong>2. BanyanDB 存储结构：</strong></p><p>BanyanDB 是 SkyWalking 团队自研的、专门为可观测性场景优化的数据库。它采用了不同于传统关系型数据库或通用 NoSQL 数据库的数据模型，以实现更高的写入性能和更低的存储成本。</p><ul><li><p><strong>数据模型</strong>: BanyanDB 主要采用了两种数据模型：</p><ul><li><strong>TimeSeries Model</strong>: 类似于时序数据库，用于存储度量（Metrics）数据。数据点按照时间顺序索引，并可以通过标签（Tags）进行高效的过滤和聚合。</li><li><strong>KeyValue Model</strong>: 用于存储 Trace 和 Log 等非结构化或半结构化数据。</li></ul></li><li><p><strong>核心概念</strong>:</p><ul><li><strong>Stream/Measure</strong>: 分别对应于 Trace/Log 数据流和 Metrics 数据流的定义。</li><li><strong>Tag</strong>: 用于索引和查询的键值对。</li><li><strong>Field</strong>: 实际存储的数据值。</li></ul></li></ul><p>BanyanDB 通过对 SkyWalking 数据模式的深度理解，在数据分片、索引和压缩等方面进行了针对性的优化，尤其在处理大量的 Trace 和 Log 数据时，相比 Elasticsearch 能展现出更优的性能和资源利用率。</p><h3 id=六结语>六、结语</h3><p>Apache SkyWalking 凭借其强大的功能、灵活的架构和活跃的社区，已经成为云原生时代下分布式系统可观测性领域的佼佼者。通过深入理解其核心业务逻辑、数据收集与关联机制以及底层的存储结构，我们不仅能更好地使用这一工具，也能从中汲取到优秀的系统设计思想。在微服务的复杂世界里，SkyWalking 无疑为我们点亮了一盏明灯，指引我们从容应对各种未知的挑战。</p><hr><h2 id=skywalking-生产实践日志采集的最佳策略与按需追踪的实现>SkyWalking 生产实践：日志采集的最佳策略与按需追踪的实现</h2><p>在我们将 SkyWalking 应用于生产环境时，很快就会遇到一个现实问题：数据量。尤其是日志数据，如果无差别地全量采集，其增长速度将远超想象，迅速耗尽存储资源。因此，制定一套智能、高效的日志采集与追踪策略至关重要。</p><h3 id=一如何配置日志采集从全要到精要的最佳实践>一、如何配置日志采集：从“全要”到“精要”的最佳实践</h3><p>在生产环境中，我们的目标不应该是记录每一行日志，而是在问题发生时，能够拥有足够的信息来定位和解决它。以下是几种业界公认的最佳实践，可以组合使用：</p><p><strong>1. 核心策略：分级与采样 (Level & Sampling)</strong></p><p>这是最基本也是最有效的控制手段。</p><ul><li><p><strong>日志级别控制 (Log Level)</strong>: 这是最经典的日志管理方法。在应用的日志框架（如 Logback, Log4j2）中，将生产环境的默认日志级别设置为 <code>WARN</code> 或 <code>ERROR</code>。这样，只有警告和错误级别的日志才会被输出和采集，从源头上极大地减少了日志量。INFO 和 DEBUG 级别的日志仅在开发或临时诊断时开启。</p></li><li><p><strong>链路追踪采样 (Trace Sampling)</strong>: SkyWalking Agent 端支持设置采样率。在 <code>agent.config</code> 配置文件中，可以设置 <code>sampler.percentage</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># 设置采样率，值为 0 到 100。例如，设置为 10 表示只采集 10% 的请求链路。</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#a6e22e>sampler.percentage</span><span style=color:#f92672>=</span><span style=color:#e6db74>10</span>
</span></span></code></pre></div><p>这意味着，只有 10% 的请求会被完整地追踪，形成链路数据。这对于监控系统的整体健康状况、计算 SLA、发现普遍性问题已经足够。对于未被采样的 90% 的请求，Agent 的开销会降到最低。</p></li></ul><p><strong>2. 关注异常：聚焦高价值日志</strong></p><p>正常的业务流程日志价值有限，而异常日志则是金矿。</p><ul><li><strong>仅关联错误日志</strong>: 很多时候，我们只关心发生错误时的日志。您可以配置日志采集工具（如 Filebeat）或在应用的日志配置中，只将包含错误堆栈或级别为 <code>ERROR</code> 的日志发送给 SkyWalking OAP。这样，即使某个链路被采样记录了，也只有其中的错误日志会与之关联，进一步减少了无关日志的存储。</li></ul><p><strong>3. 利用Metrics：用度量代替日志</strong></p><p>很多信息无需通过日志来记录，使用度量（Metrics）是更高效、更节省空间的方式。</p><ul><li><strong>场景</strong>: 例如，我们想知道某个接口的调用次数。如果为每次调用都记录一条 INFO 日志，会产生海量数据。更好的方式是，通过 SkyWalking 的度量聚合功能，直接统计该接口的 QPS、成功率、响应时间分位图等。这些聚合后的度量数据占用的空间远小于原始日志。</li></ul><p><strong>4. 智能的日志生命周期管理 (TTL)</strong></p><p>数据不可能永久存储，必须有“新陈代谢”。</p><ul><li><strong>配置 TTL (Time-To-Live)</strong>: 在后端存储（如 Elasticsearch, BanyanDB）中为不同类型的索引设置不同的生命周期策略。<ul><li><strong>链路数据 (<code>segment</code>)</strong>: 因为主要用于实时诊断，可以设置较短的保留期，如 <strong>3-7 天</strong>。</li><li><strong>日志数据 (<code>log</code>)</strong>: 同理，可以保留 <strong>7-14 天</strong>。</li><li><strong>聚合后的度量数据 (Metrics)</strong>: 这些数据尺寸小、价值高，可用于长期趋势分析，可以保留更长时间，如 <strong>30-90 天</strong>，甚至更久。</li></ul></li></ul><p>通过上述策略的组合，您可以构建一个多层次、高效率、低成本的可观测性数据平台。</p><h3 id=二按需追踪如何实现对特殊请求的重点关照>二、按需追踪：如何实现对特殊请求的“重点关照”？</h3><p>现在我们如果需要更精确的获取指定日志：SkyWalking 是否支持对特殊标记的请求自动记录全部链路日志？</p><p><strong>答案是：是的，SkyWalking 完全支持这种按需（On-Demand）或强制（Forced）采样的机制。</strong></p><p>这在生产环境中是一个极其有用的“调试开关”。当您需要针对某个特定的用户、特定的业务场景或一个线上偶发问题进行深入分析时，您不希望等待下一次采样命中，而是希望立即、强制地捕获下一次请求的完整链路。</p><p><strong>实现机制：</strong></p><p>SkyWalking 的强制采样机制是基于 <strong>Trace Context 的协议头传播</strong> 来实现的。具体步骤如下：</p><ol><li><p><strong>发起请求时注入特殊标记</strong>:
当您需要追踪某个特定请求时，需要在该请求的第一个入口（通常是发向网关或第一个微服务的 HTTP 请求）的 <strong>HTTP Header</strong> 中，加入一个特殊的标记。</p><p>对于 SkyWalking v8+ (sw8协议)，这个 Header 是：</p><pre tabindex=0><code>sw8-force-sampling: 1
</code></pre><ul><li><code>sw8-force-sampling</code>: 这是 SkyWalking Agent 能够识别的强制采样指令。</li><li><code>1</code>: 表示开启强制采样。如果值为 <code>0</code> 或不提供该 Header，则遵循默认的采样策略。</li></ul></li><li><p><strong>Agent 识别并强制采样</strong>:
当入口服务的 SkyWalking Agent 接收到这个带有 <code>sw8-force-sampling: 1</code> Header 的请求时，它会：</p><ul><li>忽略 <code>sampler.percentage</code> 配置。</li><li>立即决定对这条链路进行采样，并生成 Trace Context。</li><li>在生成的 Trace Context 中，会包含一个“已被强制采样”的标记。</li></ul></li><li><p><strong>标记在链路中传播</strong>:
这个“已被强制采样”的标记会随着 <code>TraceId</code> 一起，在整个调用链中（通过 HTTP Header 或 RPC 的 Attachment）向下游所有的服务传播。</p></li><li><p><strong>下游服务无条件采样</strong>:
所有后续的微服务，其 SkyWalking Agent 在收到上游请求时，会解析 Trace Context。当它们检测到这个“已被强制采样”的标记时，也会无视自己的采样率配置，强制记录自己的 Span 数据并上报。</p></li></ol><p><strong>最终效果：</strong></p><p>通过在请求入口处简单地增加一个 Header，您就实现了一条完整的、从入口到终点的调用链的百分之百捕获，包括其中所有的 Span 和与之关联的日志。</p><p><strong>典型应用场景：</strong></p><ul><li><strong>线上问题复现</strong>: 客服收到用户反馈某个操作失败。运维或开发人员可以通过一个内部工具，带上用户的参数和这个强制采样 Header，重新发起一次请求，从而捕imread&mldr;al-purpose NoSQL databases.<ul><li><strong>数据模型</strong>: BanyanDB 主要采用了两种数据模型：<ul><li><strong>TimeSeries Model</strong>: 用于存储度量（Metrics）数据，按照时间顺序索引，并可通过标签（Tags）进行高效的过滤和聚合。</li><li><strong>KeyValue Model</strong>: 用于存储 Trace 和 Log 等非结构化或半结构化数据。</li></ul></li><li><strong>核心概念</strong>:<ul><li><strong>Stream/Measure</strong>: 分别对应于 Trace/Log 数据流和 Metrics 数据流的定义。</li><li><strong>Tag</strong>: 用于索引和查询的键值对。</li><li><strong>Field</strong>: 实际存储的数据值。</li></ul></li></ul></li></ul><p>BanyanDB 通过对 SkyWalking 数据模式的深度理解，在数据分片、索引和压缩等方面进行了针对性的优化，尤其在处理大量的 Trace 和 Log 数据时，相比 Elasticsearch 能展现出更优的性能和资源利用率。</p><h3 id=三结语>三、结语</h3><p>Apache SkyWalking 凭借其强大的功能、灵活的架构和活跃的社区，已经成为云原生时代下分布式系统可观测性领域的佼佼者。通过深入理解其核心业务逻辑、数据收集与关联机制以及底层的存储结构，我们不仅能更好地使用这一工具，也能从中汲取到优秀的系统设计思想。在微服务的复杂世界里，SkyWalking 无疑为我们点亮了一盏明灯，指引我们从容应对各种未知的挑战。</p><p>好的，这是一份旨在指导工程师快速搭建企业级可观测性平台的详细指南。它融合了 Google、Amazon、Meta 等科技巨头的服务治理与可观测性理念，并结合 Apache SkyWalking 的具体功能，提供了详尽的最佳实践和注意事项。</p><hr><h2 id=指导工程师快速搭建可观测平台融合巨头理念的-skywalking-最佳实践>指导工程师快速搭建可观测平台：融合巨头理念的 SkyWalking 最佳实践</h2><p>在现代分布式系统中，服务治理与系统可观测性不再是“锦上添花”的附加项，而是保障业务连续性和高效迭代的“生命线”。Google 的 Dapper、Amazon 的 X-Ray、Meta 的 Canopy 等内部系统都彰显了科技巨头对可观测性的极致追求。</p><p>对于大多数企业而言，我们无需重复造轮子。Apache SkyWalking 作为业界顶级的开源 APM 项目，其设计理念与这些巨头的实践一脉相承。本指南将帮助你理解其精髓，并利用 SkyWalking 快速、高效地搭建一个强大的可观测性平台。</p><h3 id=一核心理念学习巨头的服务治理与可观测性思想>一、核心理念：学习巨头的服务治理与可观测性思想</h3><p>在动手之前，理解正确的思想至关重要。</p><ol><li><p><strong>可观测性 ≠ 监控 (Observability vs. Monitoring)</strong></p><ul><li><strong>监控 (Monitoring)</strong>：告诉你系统的哪些部分<strong>正在</strong>出问题。它基于预设的仪表盘和告警，回答“已知”的问题。</li><li><strong>可观测性 (Observability)</strong>：让你能够通过探索系统的外部输出来理解其内部状态，从而回答“未知”的问题。它允许你提出任意问题，而无需预先定义。</li><li><strong>SkyWalking 实践</strong>: SkyWalking 通过提供 <strong>Traces (链路)</strong>、<strong>Metrics (度量)</strong> 和 <strong>Logs (日志)</strong> 这三大支柱，并将其自动关联，为你提供了从宏观监控到微观探索的完整能力，是实现可观测性的绝佳工具。</li></ul></li><li><p><strong>数据驱动的决策与自动化</strong></p><ul><li>巨头公司依赖海量遥测数据进行容量规划、性能优化、故障定位和自动扩缩容。服务治理的规则（如熔断、限流）不再是拍脑袋决定，而是基于实时的 SLA、错误率等指标动态调整。</li><li><strong>SkyWalking 实践</strong>: SkyWalking OAP (可观测性分析平台) 本身就是一个流式数据处理引擎。你可以利用其丰富的聚合指标（服务、实例、端点、数据库等）来驱动决策。更进一步，可以通过其告警 Webhook 功能，与自动化运维平台（如 Ansible, SaltStack）或 Kubernetes 的 HPA (Horizontal Pod Autoscaler) 集成，实现自动化治理。</li></ul></li><li><p><strong>开发者自助与所有权 (Developer Self-Service & Ownership)</strong></p><ul><li>在 Google、Amazon，开发团队对自己服务的“从摇篮到坟墓”负全责，包括其线上表现。因此，平台必须为开发者提供自助式、低门槛的工具来观测他们的服务。</li><li><strong>SkyWalking 实践</strong>: SkyWalking 的 Agent 探针实现了“零代码侵入”或“低代码侵入”的自动化仪器化 (Auto-instrumentation)，开发者几乎无需修改业务代码即可接入。其直观的 UI 使得每个开发者都能轻松查看自己服务的拓扑、依赖、性能瓶颈和相关日志，极大地降低了使用门槛。</li></ul></li></ol><h3 id=二skywalking-快速搭建与最佳实践>二、SkyWalking 快速搭建与最佳实践</h3><h4 id=步骤一规划与架构选型-几分钟到几小时>步骤一：规划与架构选型 (几分钟到几小时)</h4><p><strong>目标</strong>：选择适合你当前和未来规模的部署架构。</p><table><thead><tr><th style=text-align:left>规模</th><th style=text-align:left>OAP 部署</th><th style=text-align:left>存储方案</th><th style=text-align:left>建议</th></tr></thead><tbody><tr><td style=text-align:left><strong>体验/小型</strong></td><td style=text-align:left>单机模式</td><td style=text-align:left>H2 (内置)</td><td style=text-align:left><code>bin/startup.sh</code> 一键启动，用于功能体验。<strong>严禁用于生产！</strong></td></tr><tr><td style=text-align:left><strong>中小型生产</strong></td><td style=text-align:left>单机模式</td><td style=text-align:left>Elasticsearch (单节点)</td><td style=text-align:left>适用于日均百万到千万级 Trace 量。成本可控，运维简单。</td></tr><tr><td style=text-align:left><strong>中大型生产</strong></td><td style=text-align:left>OAP 集群模式</td><td style=text-align:left>Elasticsearch (集群)</td><td style=text-align:left>OAP 实例通过 Nginx 等进行负载均衡，并通过 ZooKeeper/Kubernetes/Consul 进行协调。这是最常见、最成熟的生产部署方案。</td></tr><tr><td style=text-align:left><strong>大规模/未来</strong></td><td style=text-align:left>OAP 集群模式</td><td style=text-align:left><strong>BanyanDB</strong> / Elasticsearch</td><td style=text-align:left>BanyanDB 是 SkyWalking 的原生数据库，针对 APM 场景优化，性能和存储成本优于 ES。虽然相对年轻，但潜力巨大，值得关注和投入。</td></tr></tbody></table><p><strong>最佳实践</strong>：</p><ul><li><strong>从“中小型生产”方案起步</strong>：即使你当前规模很小，也建议直接从 Elasticsearch 作为存储开始，这能让你平滑地扩展到集群模式。</li><li><strong>容器化部署优先</strong>：使用官方提供的 Docker Compose 或 Helm Charts 在 Docker 或 Kubernetes 上进行部署。这能极大地简化部署和后续的运维、升级工作。</li><li><strong>网络规划</strong>：确保你的业务应用容器可以访问 OAP 暴露的服务端口 (gRPC: 11800, HTTP: 12800)。</li></ul><h4 id=步骤二部署核心平台-15---60-分钟>步骤二：部署核心平台 (15 - 60 分钟)</h4><p><strong>目标</strong>：让 SkyWalking OAP 和 UI 运行起来。</p><p>以 <strong>Docker Compose</strong> 部署 <strong>OAP + Elasticsearch 7 + UI</strong> 为例：</p><ol><li><p><strong>下载官方 <code>docker-compose.yml</code></strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>curl -O https://raw.githubusercontent.com/apache/skywalking-docker/master/8/docker-compose.yml
</span></span></code></pre></div><p><em>注意：请根据需要选择SkyWalking的版本（如 <code>9</code>）。</em></p></li><li><p><strong>（可选但推荐）修改配置</strong>:</p><ul><li><strong>数据持久化</strong>：将 <code>elasticsearch</code> 服务的 <code>volumes</code> 映射到宿主机的持久化目录，防止容器删除导致数据丢失。</li><li><strong>环境变量</strong>：在 <code>oap</code> 服务的 <code>environment</code> 部分，可以调整关键配置，如 <code>SW_CORE_SAMPLER</code>（采样率）、<code>SW_STORAGE_ES_QUERY_MAX_SIZE</code> 等。</li></ul></li><li><p><strong>启动平台</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>docker-compose up -d
</span></span></code></pre></div></li><li><p><strong>验证</strong>:</p><ul><li>访问 <code>http://&lt;your-host-ip>:8080</code> 查看 SkyWalking UI。</li><li>检查 OAP 日志 <code>docker-compose logs -f oap</code>，确保它已成功连接到 Elasticsearch。</li></ul></li></ol><h4 id=步骤三接入你的应用-每个服务-5---20-分钟>步骤三：接入你的应用 (每个服务 5 - 20 分钟)</h4><p><strong>目标</strong>：让你的服务上报遥测数据。</p><p><strong>核心工具</strong>：SkyWalking Java Agent</p><ol><li><p><strong>下载 Agent</strong>: 从 <a href=https://skywalking.apache.org/downloads/>SkyWalking 官网</a> 下载对应版本的 Agent 包。</p></li><li><p><strong>解压并配置</strong>: 将 Agent 包解压到你应用容器可以访问的位置。核心配置是 <code>agent/config/agent.config</code> 文件。<strong>你至少需要修改以下配置</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># 应用/服务名。这是在 UI 上显示的名字，必须具有业务意义。</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#a6e22e>agent.service_name</span><span style=color:#f92672>=</span><span style=color:#e6db74>${SW_AGENT_NAME:Your-Application-Name}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#75715e># OAP 的 gRPC 服务地址。</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#a6e22e>collector.backend_service</span><span style=color:#f92672>=</span><span style=color:#e6db74>${SW_AGENT_COLLECTOR_BACKEND_SERVICES:127.0.0.1:11800}</span>
</span></span></code></pre></div><p><strong>最佳实践</strong>：不要直接修改文件！使用<strong>环境变量</strong>或 <strong>JVM 启动参数</strong>来覆盖默认配置，这与容器化和 CI/CD 的理念更契合。</p></li><li><p><strong>挂载并启动应用</strong>:
以 Java 应用为例，修改你的 Dockerfile 或启动脚本，在 <code>java</code> 命令中加入 <code>-javaagent</code> 参数：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>java -javaagent:/path/to/skywalking-agent/skywalking-agent.jar <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ae81ff></span>     -Dskywalking.agent.service_name<span style=color:#f92672>=</span>my-awesome-app <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ae81ff></span>     -Dskywalking.collector.backend_services<span style=color:#f92672>=</span>oap-service.skywalking.svc:11800 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#ae81ff></span>     -jar your-app.jar
</span></span></code></pre></div><ul><li><code>-javaagent</code>: 指定 agent jar 文件的路径。</li><li><code>-Dskywalking.xxx</code>: 通过 JVM System Properties 覆盖配置，优先级最高。</li></ul></li></ol><p><strong>其他语言 Agent</strong>：对于 Go, Python, Node.js, .NET 等，请参考官方文档。它们的接入方式（通常是引入一个库并初始化）同样非常简单。</p><h4 id=步骤四观测分析与告警>步骤四：观测、分析与告警</h4><p>现在，刷新 SkyWalking UI，你应该已经能看到应用的拓扑图、服务列表和端点信息了。</p><p><strong>最佳实践</strong>：</p><ul><li><strong>从拓扑图开始</strong>: 拓扑图是上帝视角，首先检查服务间的依赖关系是否符合预期，快速发现异常的依赖（红色表示高延迟或高错误率）。</li><li><strong>分析慢请求</strong>: 在 Trace 查询界面，按耗时排序，找到最慢的几次请求。点击进入，查看详细的 Span 调用树，定位是哪个环节（数据库查询、RPC 调用、内部代码）耗时最长。</li><li><strong>关联日志</strong>:<ul><li><strong>配置日志框架</strong>: 在你的应用日志配置（如 <code>logback.xml</code>）中，引入 <code>traceId</code>。SkyWalking Agent 会自动将 <code>TID</code> 注入到 MDC (Mapped Diagnostic Context)。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#f92672>&lt;appender</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;STDOUT&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    <span style=color:#f92672>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>        <span style=color:#f92672>&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - [%X{TID}] - %msg%n<span style=color:#f92672>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    <span style=color:#f92672>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#f92672>&lt;/appender&gt;</span>
</span></span></code></pre></div></li><li><strong>配置日志采集</strong>: 让 OAP 能够接收并解析这些日志。你可以使用 gRPC Log Reporter，或者配置 Filebeat/Fluentd 将日志转发到 OAP。</li><li><strong>LAL (Log Analysis Language)</strong>: 在 OAP 的 <code>lal-script.yaml</code> 中配置解析规则，从日志中提取 <code>traceId</code>。</li></ul></li><li><strong>设置关键告警</strong>: 不要等到用户投诉。在 <code>alarm-settings.yml</code> 中为核心业务设置告警规则，例如：<ul><li>服务 SLA 低于 99.9%。</li><li>服务实例持续 3 分钟处于离线状态。</li><li>端点 P95 响应时间超过 500ms。</li></ul></li></ul><h3 id=三重要注意事项>三、重要注意事项</h3><ol><li><p><strong>服务名 (<code>agent.service_name</code>) 是第一公民</strong>：</p><ul><li><strong>必须全局唯一且有意义</strong>。它是所有数据关联的根基。</li><li><strong>制定命名规范</strong>，例如 <code>business-unit-app-name</code> (e.g., <code>trade-order-service</code>)。</li><li>一旦确定，<strong>不要轻易修改</strong>，否则 SkyWalking 会将其视为一个全新的服务。</li></ul></li><li><p><strong>理解并善用采样率</strong>：</p><ul><li><strong>100% 采样只适用于开发环境</strong>。生产环境全量采集会压垮后端。</li><li>从 <code>10%</code> (<code>sampler.percentage=10</code>) 开始，根据 OAP 和存储的负载情况动态调整。</li><li>对于关键且低频的业务，可以使用前面提到的<strong>强制采样 Header (<code>sw8-force-sampling: 1</code>)</strong> 来确保不漏掉任何一次追踪。</li></ul></li><li><p><strong>保护你的 OAP 和存储</strong>：</p><ul><li><strong>设置 JVM 堆内存</strong>: 为 OAP 设置合理的 JVM 堆内存 (e.g., <code>-Xmx4g -Xms4g</code>)，防止内存溢出。</li><li><strong>监控 OAP 自身</strong>: 将 OAP 自身也纳入监控！SkyWalking 提供了 <code>self-observability</code> 模块，可以监控其内部的运行状况。</li><li><strong>为 Elasticsearch 设置合理的 Shard 和 Replica</strong>，并配置好索引生命周期管理 (ILM) 来自动清理过期数据。</li></ul></li><li><p><strong>安全是非功能需求，但至关重要</strong>:</p><ul><li>OAP 的端口不应暴露在公网上。</li><li>从 SkyWalking 9.x 开始，支持 Token 认证，为 Agent 和 OAP 之间的通信增加一道安全屏障。在 <code>agent.config</code> 中配置 <code>agent.authentication</code>。</li></ul></li></ol><h3 id=总结>总结</h3><p>搭建可观测性平台是一个系统工程，但遵循以上指南，你可以快速地走上正轨。</p><ul><li><strong>思想先行</strong>：理解可观测性的三大支柱和数据驱动的理念。</li><li><strong>小步快跑</strong>：从标准的容器化部署方案开始，快速让平台运行起来。</li><li><strong>自动化接入</strong>：将 Agent 的集成作为应用模板或 CI/CD 流程的一部分，降低新服务的接入成本。</li><li><strong>从用例驱动</strong>：从解决一个实际的性能问题或排查一次线上故障开始，逐步探索 SkyWalking 的高级功能。</li></ul><p>通过将巨头的先进理念与 SkyWalking 的强大功能相结合，你的团队将能更从容地驾驭复杂的分布式系统，实现真正意义上的服务治理。</p></div><div class=post_comments></div></article><aside class=sidebar><section class=sidebar_inner><br><h2 class=mt-4>精选文章</h2><ul><li><a href=https://namejlt.github.io/posts/tech/practice/backend/i18n-system/ class=nav-link title=通用多语言（i18n）服务设计>通用多语言（i18n）服务设计</a></li><li><a href=https://namejlt.github.io/posts/tech/golang/dev/go-dep-inject/ class=nav-link title=golang依赖注入实践>golang依赖注入实践</a></li><li><a href=https://namejlt.github.io/posts/tech/practice/backend/bargain-prices/ class=nav-link title=如何设计一个砍价算法>如何设计一个砍价算法</a></li><li><a href=https://namejlt.github.io/posts/tech/practice/backend/backend-summary/ class=nav-link title=后端常用技术总结>后端常用技术总结</a></li></ul><h2 class=mt-4>最新文章</h2><ul class=flex-column><li><a href=https://namejlt.github.io/posts/life/skills/communicate/mental-maturity/ class=nav-link title=如何让自己心智更加成熟简易版>如何让自己心智更加成熟简易版</a></li><li><a href=https://namejlt.github.io/posts/life/skills/logic/simple-logic/ class=nav-link title=从哲学到逻辑学的分析与简单应用>从哲学到逻辑学的分析与简单应用</a></li><li><a href=https://namejlt.github.io/posts/tech/practice/design/short-url/ class=nav-link title=短链系统设计>短链系统设计</a></li><li><a href=https://namejlt.github.io/posts/tech/practice/backend/db-index-summary/ class=nav-link title=数据库索引一览>数据库索引一览</a></li><li><a href=https://namejlt.github.io/posts/life/skills/communicate/make-things-clear/ class=nav-link title=把事情讲清楚的能力分析以及训练>把事情讲清楚的能力分析以及训练</a></li><li><a href=https://namejlt.github.io/posts/tech/practice/backend/golang-project-deploy-rule/ class=nav-link title=golang项目部署规范实践>golang项目部署规范实践</a></li><li><a href=https://namejlt.github.io/posts/tech/practice/backend/service-manage-skywalking/ class=nav-link title=服务治理相关实践-skywalking>服务治理相关实践-skywalking</a></li><li><a href=https://namejlt.github.io/posts/tech/ai/note/ai-word/ class=nav-link title="AI 笔记-大模型常见名词以及关系">AI 笔记-大模型常见名词以及关系</a></li></ul><div><h2 class="mt-4 taxonomy" id=categories-section>分类</h2><nav class=tags_nav><a href=https://namejlt.github.io/categories/%E6%8A%80%E6%9C%AF/%E5%AE%9E%E8%B7%B5/%E5%90%8E%E7%AB%AF/ class="post_tag button button_translucent" title=技术/实践/后端>技术/实践/后端
<span class=button_tally>6</span>
</a><a href=https://namejlt.github.io/categories/%E9%98%85%E8%AF%BB/%E7%AC%94%E8%AE%B0/%E9%97%AE%E9%A2%98/ class="post_tag button button_translucent" title=阅读/笔记/问题>阅读/笔记/问题
<span class=button_tally>5</span>
</a><a href=https://namejlt.github.io/categories/%E6%8A%80%E6%9C%AF/ai/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/ class="post_tag button button_translucent" title=技术/ai/应用开发>技术/AI/应用开发
<span class=button_tally>4</span>
</a><a href=https://namejlt.github.io/categories/%E6%8A%80%E6%9C%AF/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/deepwiki/ class="post_tag button button_translucent" title=技术/源码阅读/deepwiki>技术/源码阅读/DEEPWIKI
<span class=button_tally>4</span>
</a><a href=https://namejlt.github.io/categories/%E6%8A%80%E6%9C%AF/ai/%E7%AC%94%E8%AE%B0/ class="post_tag button button_translucent" title=技术/ai/笔记>技术/AI/笔记
<span class=button_tally>2</span>
</a><a href=https://namejlt.github.io/categories/%E7%94%9F%E6%B4%BB/%E6%8A%80%E8%83%BD/%E6%B2%9F%E9%80%9A/ class="post_tag button button_translucent" title=生活/技能/沟通>生活/技能/沟通
<span class=button_tally>2</span>
</a><a href=https://namejlt.github.io/categories/%E6%8A%80%E6%9C%AF/golang/%E5%BC%80%E5%8F%91/ class="post_tag button button_translucent" title=技术/golang/开发>技术/GOLANG/开发
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/categories/%E6%8A%80%E6%9C%AF/%E5%AE%9E%E8%B7%B5/%E8%AE%BE%E8%AE%A1/ class="post_tag button button_translucent" title=技术/实践/设计>技术/实践/设计
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/categories/%E6%8A%80%E6%9C%AF/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/hugo/ class="post_tag button button_translucent" title=技术/源码阅读/hugo>技术/源码阅读/HUGO
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/categories/%E7%94%9F%E6%B4%BB/%E6%8A%80%E8%83%BD/%E9%80%BB%E8%BE%91/ class="post_tag button button_translucent" title=生活/技能/逻辑>生活/技能/逻辑
<span class=button_tally>1</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=tags-section>标签</h2><nav class=tags_nav><a href=https://namejlt.github.io/tags/ai/ class="post_tag button button_translucent" title=ai>AI
<span class=button_tally>7</span>
</a><a href=https://namejlt.github.io/tags/golang/ class="post_tag button button_translucent" title=golang>GOLANG
<span class=button_tally>5</span>
</a><a href=https://namejlt.github.io/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/ class="post_tag button button_translucent" title=大模型>大模型
<span class=button_tally>5</span>
</a><a href=https://namejlt.github.io/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/ class="post_tag button button_translucent" title=源码阅读>源码阅读
<span class=button_tally>5</span>
</a><a href=https://namejlt.github.io/tags/deepwiki/ class="post_tag button button_translucent" title=deepwiki>DEEPWIKI
<span class=button_tally>4</span>
</a><a href=https://namejlt.github.io/tags/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/ class="post_tag button button_translucent" title=应用开发>应用开发
<span class=button_tally>4</span>
</a><a href=https://namejlt.github.io/tags/cursor/ class="post_tag button button_translucent" title=cursor>CURSOR
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/docker/ class="post_tag button button_translucent" title=docker>DOCKER
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/hugo/ class="post_tag button button_translucent" title=hugo>HUGO
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/prompt/ class="post_tag button button_translucent" title=prompt>PROMPT
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/skywalking/ class="post_tag button button_translucent" title=skywalking>SKYWALKING
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E5%90%8E%E7%AB%AF/ class="post_tag button button_translucent" title=后端>后端
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E5%BF%83%E6%99%BA/ class="post_tag button button_translucent" title=心智>心智
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/ class="post_tag button button_translucent" title=数据库>数据库
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/ class="post_tag button button_translucent" title=服务治理>服务治理
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E6%B2%9F%E9%80%9A/ class="post_tag button button_translucent" title=沟通>沟通
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E6%B8%B8%E6%88%8F/ class="post_tag button button_translucent" title=游戏>游戏
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/ class="post_tag button button_translucent" title=系统设计>系统设计
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E7%B4%A2%E5%BC%95/ class="post_tag button button_translucent" title=索引>索引
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E8%90%A5%E9%94%80%E5%B7%A5%E5%85%B7/ class="post_tag button button_translucent" title=营销工具>营销工具
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E8%AE%BE%E8%AE%A1/ class="post_tag button button_translucent" title=设计>设计
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F/ class="post_tag button button_translucent" title=调度系统>调度系统
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E9%80%BB%E8%BE%91/ class="post_tag button button_translucent" title=逻辑>逻辑
<span class=button_tally>1</span>
</a><a href=https://namejlt.github.io/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/ class="post_tag button button_translucent" title=项目管理>项目管理
<span class=button_tally>1</span></a></nav></div></section></aside></div></main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord"><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527.41542 45.5603.39851 45.468.440769 45.4204.525289 44.7963 1.6353 44.105 3.0834 43.6209 4.2216c-5.4572-.817-10.8864-.817-16.2317.0C26.905 3.0581 26.1886 1.6353 25.5617.525289 25.5141.443589 25.4218.40133 25.3294.41542c-5.071.87338-9.9237 2.40318-14.4518 4.48238C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795 1.57795 18.7309-.943561 32.1443.293408 45.3914.299005 45.4562.335386 45.5182.385761 45.5576 6.45866 50.0174 12.3413 52.7249 18.1147 54.5195 18.2071 54.5477 18.305 54.5139 18.3638 54.4378 19.7295 52.5728 20.9469 50.6063 21.9907 48.5383 22.0523 48.4172 21.9935 48.2735 21.8676 48.2256 19.9366 47.4931 18.0979 46.6 16.3292 45.5858 16.1893 45.5041 16.1781 45.304 16.3068 45.2082 16.679 44.9293 17.0513 44.6391 17.4067 44.3461 17.471 44.2926 17.5606 44.2813 17.6362 44.3151c11.6196 5.3051 24.1992 5.3051 35.6817.0C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433 53.9057 44.6363 54.2779 44.9293 54.6529 45.2082 54.7816 45.304 54.7732 45.5041 54.6333 45.5858c-1.7687 1.0339-3.6074 1.9073-5.5412 2.637C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383c1.0662 2.0651 2.2836 4.0316 3.6241 5.8967C52.6519 54.5139 52.7526 54.5477 52.845 54.5195c5.8014-1.7946 11.684-4.5021 17.7569-8.9619C70.6551 45.5182 70.6887 45.459 70.6943 45.3942 72.1747 30.0791 68.2147 16.7757 60.1968 4.9823 60.1772 4.9429 60.1437 4.9147 60.1045 4.8978zM23.7259 37.3253c-3.4983.0-6.3808-3.2117-6.3808-7.156s2.8266-7.156 6.3808-7.156c3.5821.0 6.4367 3.2399 6.3807 7.156.0 3.9443-2.8266 7.156-6.3807 7.156zm23.5919.0c-3.4982.0-6.3807-3.2117-6.3807-7.156s2.8265-7.156 6.3807-7.156c3.5822.0 6.4367 3.2399 6.3808 7.156.0 3.9443-2.7986 7.156-6.3808 7.156z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon"><path fill="#fff" d="m15.054695 9.8859583c-.22611 1.1632697-2.02517 2.4363497-4.09138 2.6830797-1.0774504.12856-2.1382704.24673-3.2694704.19484-1.84996-.0848-3.30971-.44157-3.30971-.44157.0.1801.0111.35157.0333.51194.24051 1.82571 1.81034 1.93508 3.29737 1.98607 1.50088.0514 2.8373104-.37004 2.8373104-.37004l.0617 1.35686s-1.0498104.56374-2.9199404.66742c-1.03124.0567-2.3117-.0259-3.80308-.42069-3.23454998-.85613-3.79081998-4.304-3.87592998-7.8024197-.026-1.03871-.01-2.01815-.01-2.83732.0-3.57732 2.34385998-4.62587996 2.34385998-4.62587996 1.18184-.54277 3.20976-.77101 5.318-.7882499985409h.0518C9.8267646.01719834 11.856025.24547834 13.037775.78824834c0 0 2.34377 1.04855996 2.34377 4.62587996.0.0.0294 2.63937-.32687 4.47183"/><path fill="#000" d="m12.616925 5.6916583v4.3315297h-1.71607V5.8189683c0-.88624-.37289-1.33607-1.1187604-1.33607-.82467.0-1.23799.53361-1.23799 1.58875v2.30122h-1.70594v-2.30122c0-1.05514-.4134-1.58875-1.23808-1.58875-.74587.0-1.11876.44983-1.11876 1.33607v4.2042197h-1.71607V5.6916583c0-.88527.22541-1.58876.67817-2.10922.46689-.52047 1.07833-.78727 1.83735-.78727.87816.0 1.54317.33752 1.98288 1.01267l.42744.71655.42753-.71655c.43961-.67515 1.10463-1.01267 1.9828704-1.01267.75893.0 1.37037.2668 1.83735.78727.45268.52046.67808 1.22395.67808 2.10922"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 530" id="bluesky"><path d="m135.72 44.03C202.216 93.951 273.74 195.17 3e2 249.49c26.262-54.316 97.782-155.54 164.28-205.46C512.26 8.009 590-19.862 590 68.825c0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-.0174-2.9357-1.1937.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07.0-88.687 77.742-60.816 125.72-24.795z"/><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="ko-fi"><path fill="#fff" d="M4.5 9.8527H32.7947a0 0 0 010 0v19.225a9.07 9.07.0 01-9.07 9.07H13.57a9.07 9.07.0 01-9.07-9.07V9.8527a0 0 0 010 0z"/><path fill="#000" d="M12.197 25.9493l6.45 6.45 6.45-6.45a8.2 8.2.0 002.4016-5.798h0a4.5082 4.5082.0 00-4.212-4.5459 4.4262 4.4262.0 00-4.64 4.4209 4.4261 4.4261.0 00-4.64-4.4209 4.5082 4.5082.0 00-4.212 4.5459h0a8.2 8.2.0 002.4024 5.798z"/><path fill="#fff" d="M32.7947 9.8527H35.73a7.77 7.77.0 010 15.5394H32.7947"/></svg></symbol></svg><footer class=footer><div class="footer_inner wrap pale"><img src=https://namejlt.github.io/icons/apple-touch-icon.png class="icon icon_2 transparent" alt="LX 知识库"><p>Copyright&nbsp;<span class=year></span>&nbsp;LX 知识库. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><title>to-top</title><use xlink:href="#to-top"/></svg></a></div></footer><script type=text/javascript src=https://namejlt.github.io/zh/js/bundle.69325906ed33af5dc7368bca8e00939b95d01580847ca88772bf66270e14fb40adff431f178da9149d66c61d7dcb12f9db4aabf2273327b03c5ddfc5424b4d5e.js integrity="sha512-aTJZBu0zr13HNovKjgCTm5XQFYCEfKiHcr9mJw4U+0Ct/0MfF42pFJ1mxh19yxL520qr8iczJ7A8Xd/FQktNXg==" crossorigin=anonymous></script></body></html>